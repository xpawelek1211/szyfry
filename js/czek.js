/*
AB|CD|EF   ╲T╱
GH|IJ|KL  Y ╳ U  (Z)
MN|OP|RS   ╱W╲
*/

setInterval(() => {
  czek.value = "";
  czek.style.color = "#000000";
  const czek_data = {
    " ": "   ",
    "A": " ̲•̲ ̲ ̲|",
    "B": " ̲ ̲ ̲•̲|",
    "C": "|̲•̲ ̲ ̲|",
    "D": "|̲ ̲ ̲•̲|",
    "E": "|̲•̲ ̲ ̲ ",
    "F": "|̲ ̲ ̲•̲ ",
    "G": " ̲̅•̲̅ ̲̅ ̲̅|",
    "H": " ̲̅ ̲̅ ̲̅•̲̅|",
    "I": "|̲̅•̲̅ ̲̅ ̲̅|",
    "J": "|̲̅ ̲̅ ̲̅•̲̅|",
    "K": "|̲̅•̲̅ ̲̅ ̲̅ ",
    "L": "|̲̅ ̲̅ ̲̅•̲̅ ",
    "M": " ̅•̅ ̅ ̅|",
    "N": " ̅ ̅ ̅•̅|",
    "O": "|̅•̅ ̅ ̅|",
    "P": "|̅ ̅ ̅•̅|",
    "R": "|̅•̅ ̅ ̅ ",
    "S": "|̅ ̅ ̅•̅ ",
    "T": "⟇",
    "U": "⋖",
    "W": "⟑",
    "Y": "⋗",
    "Z": "⊙"
  },
  czek_img_data = {
    "A": "M 25.929164,0 V 16.40417 H 0 V 19.05 H 28.575004 V 0 Z M 9.260414,6.35 a 3.175,3.175 0 0 0 -3.174997,3.175 3.175,3.175 0 0 0 3.174997,3.175 3.175,3.175 0 0 0 3.175,-3.175 3.175,3.175 0 0 0 -3.175,-3.175 z",
    "B": "M 25.929164,0 V 16.40417 H 0 V 19.05 H 28.575004 V 0 Z m -6.61458,6.35 a 3.175,3.175 0 0 0 -3.175,3.175 3.175,3.175 0 0 0 3.175,3.175 3.175,3.175 0 0 0 3.175,-3.175 3.175,3.175 0 0 0 -3.175,-3.175 z",
    "C": "M 0,0 V 19.05 H 28.575004 V 0 h -2.64584 V 16.40417 H 2.645833 V 0 Z m 9.260414,6.35 a 3.175,3.175 0 0 0 -3.174997,3.175 3.175,3.175 0 0 0 3.174997,3.175 3.175,3.175 0 0 0 3.175,-3.175 3.175,3.175 0 0 0 -3.175,-3.175 z",
    "D": "M 28.575004,0 V 19.05 H 0 V 0 H 2.64584 V 16.40417 H 25.929174 V 0 Z m -9.26041,6.35 a 3.175,3.175 0 0 1 3.17499,3.175 3.175,3.175 0 0 1 -3.17499,3.175 3.175,3.175 0 0 1 -3.175,-3.175 3.175,3.175 0 0 1 3.175,-3.175 z",
    "E": "M 2.64584,0 V 16.40417 H 28.575004 V 19.05 H 0 V 0 Z m 6.614584,6.35 a 3.175,3.175 0 0 1 3.175,3.175 3.175,3.175 0 0 1 -3.175,3.175 A 3.175,3.175 0 0 1 6.08542,9.525 3.175,3.175 0 0 1 9.260424,6.35 Z",
    "F": "M 2.64584,0 V 16.40417 H 28.575004 V 19.05 H 0 V 0 Z m 16.668754,6.35 a 3.175,3.175 0 0 1 3.17499,3.175 3.175,3.175 0 0 1 -3.17499,3.175 3.175,3.175 0 0 1 -3.175,-3.175 3.175,3.175 0 0 1 3.175,-3.175 z",
    "G": "M 0,0 V 2.64583 H 25.92916 V 16.40417 H 0 V 19.05 H 28.575 V 0 Z m 9.26041,6.35 a 3.175,3.175 0 0 0 -3.175,3.175 3.175,3.175 0 0 0 3.175,3.175 3.175,3.175 0 0 0 3.175,-3.175 3.175,3.175 0 0 0 -3.175,-3.175 z",
    "H": "M 0,0 V 2.64583 H 25.92916 V 16.40417 H 0 V 19.05 H 28.575 V 0 Z m 19.31458,6.35 a 3.175,3.175 0 0 0 -3.175,3.175 3.175,3.175 0 0 0 3.175,3.175 3.175,3.175 0 0 0 3.175,-3.175 3.175,3.175 0 0 0 -3.175,-3.175 z",
    "I": "M 0,0 V 19.05 H 28.575 V 0 Z M 2.64583,2.64583 H 25.92916 V 16.40417 H 2.64583 Z M 9.26041,6.35 a 3.175,3.175 0 0 0 -3.175,3.175 3.175,3.175 0 0 0 3.175,3.175 3.175,3.175 0 0 0 3.175,-3.175 3.175,3.175 0 0 0 -3.175,-3.175 z",
    "J": "M 28.575,0 V 19.05 H 0 V 0 Z M 25.92917,2.64583 H 2.64584 V 16.40417 H 25.92917 Z M 19.31459,6.35 a 3.175,3.175 0 0 1 3.175,3.175 3.175,3.175 0 0 1 -3.175,3.175 3.175,3.175 0 0 1 -3.175,-3.175 3.175,3.175 0 0 1 3.175,-3.175 z",
    "K": "M 28.575,0 V 2.64583 H 2.64584 V 16.40417 H 28.575 V 19.05 H 0 V 0 Z M 9.26042,6.35 a 3.175,3.175 0 0 1 3.175,3.175 3.175,3.175 0 0 1 -3.175,3.175 3.175,3.175 0 0 1 -3.175,-3.175 3.175,3.175 0 0 1 3.175,-3.175 z",
    "L": "M 28.575,0 V 2.64583 H 2.64584 V 16.40417 H 28.575 V 19.05 H 0 V 0 Z m -9.26041,6.35 a 3.175,3.175 0 0 1 3.175,3.175 3.175,3.175 0 0 1 -3.175,3.175 3.175,3.175 0 0 1 -3.175,-3.175 3.175,3.175 0 0 1 3.175,-3.175 z",
    "M": "M 25.92917,19.05 V 2.64583 H 0 V 0 H 28.57501 V 19.05 Z M 9.26042,12.7 a 3.175,3.175 0 0 1 -3.175,-3.175 3.175,3.175 0 0 1 3.175,-3.175 3.175,3.175 0 0 1 3.175,3.175 3.175,3.175 0 0 1 -3.175,3.175 z",
    "N": "M 25.92917,19.05 V 2.64583 H 0 V 0 H 28.57501 V 19.05 Z M 19.31459,12.7 a 3.175,3.175 0 0 1 -3.175,-3.175 3.175,3.175 0 0 1 3.175,-3.175 3.175,3.175 0 0 1 3.175,3.175 3.175,3.175 0 0 1 -3.175,3.175 z",
    "O": "M 0,19.05 V 0 H 28.57501 V 19.05 H 25.92917 V 2.64583 H 2.64583 V 19.05 Z M 9.26042,12.7 a 3.175,3.175 0 0 1 -3.175,-3.175 3.175,3.175 0 0 1 3.175,-3.175 3.175,3.175 0 0 1 3.175,3.175 3.175,3.175 0 0 1 -3.175,3.175 z",
    "P": "M 28.57501,19.05 V 0 H 0 V 19.05 H 2.64584 V 2.64583 H 25.92918 V 19.05 Z M 19.3146,12.7 A 3.175,3.175 0 0 0 22.48959,9.525 3.175,3.175 0 0 0 19.3146,6.35 a 3.175,3.175 0 0 0 -3.175,3.175 3.175,3.175 0 0 0 3.175,3.175 z",
    "R": "M 2.64584,19.05 V 2.64583 H 28.57501 V 0 H 0 V 19.05 Z M 9.26043,12.7 A 3.175,3.175 0 0 0 12.43543,9.525 3.175,3.175 0 0 0 9.26043,6.35 3.175,3.175 0 0 0 6.08542,9.525 3.175,3.175 0 0 0 9.26043,12.7 Z",
    "S": "M 2.64584,19.05 V 2.64583 H 28.57501 V 0 H 0 V 19.05 Z M 19.3146,12.7 A 3.175,3.175 0 0 0 22.48959,9.525 3.175,3.175 0 0 0 19.3146,6.35 a 3.175,3.175 0 0 0 -3.175,3.175 3.175,3.175 0 0 0 3.175,3.175 z",
    "T": "m 19.049994,0 c 0,0 -9.524734,19.05 -9.524994,19.05 L 0,0 H 2.95641 L 9.525,13.11755 16.093596,0 Z M 9.525,0 c 1.753506,0 3.174996,1.4215 3.174996,3.175 0,1.7535 -1.42149,3.175 -3.174996,3.175 C 7.7715,6.35 6.35,4.9285 6.35,3.175 6.35,1.4215 7.7715,0 9.525,0 Z",
    "U": "M 19.049994,19.05 C 19.049994,19.05 0,9.52525 0,9.525 L 19.049994,0 V 2.95641 L 5.93245,9.525 19.049994,16.09359 Z m 0,-9.525 c 0,1.7535 -1.421498,3.175 -3.174998,3.175 -1.7535,0 -3.175,-1.4215 -3.175,-3.175 0,-1.7535 1.4215,-3.175 3.175,-3.175 1.7535,0 3.174998,1.4215 3.174998,3.175 z",
    "W": "M 0,19.05 C 0,19.05 9.52475,0 9.525,0 l 9.524994,19.05 H 16.093586 L 9.525,5.93245 2.95641,19.05 Z m 9.525,0 c -1.7535,0 -3.175,-1.4215 -3.175,-3.175 0,-1.7535 1.4215,-3.175 3.175,-3.175 1.753496,0 3.174996,1.4215 3.174996,3.175 0,1.7535 -1.4215,3.175 -3.174996,3.175 z",
    "Y": "M 0,0 C 0,0 19.049994,9.52475 19.049994,9.525 L 0,19.05 V 16.09359 L 13.117546,9.525 0,2.95641 Z M 0,9.525 C 0,7.7715 1.4215,6.35 3.175,6.35 4.9285,6.35 6.35,7.7715 6.35,9.525 6.35,11.2785 4.9285,12.7 3.175,12.7 1.4215,12.7 0,11.2785 0,9.525 Z",
    "Z": "M 9.525,0 A 9.525,9.525 0 0 1 19.049994,9.525 9.525,9.525 0 0 1 9.525,19.05 9.525,9.525 0 0 1 0,9.525 9.525,9.525 0 0 1 9.525,0 Z m 0,2.64583 A 6.8791667,6.8791667 0 0 0 2.64584,9.525 6.8791667,6.8791667 0 0 0 9.525,16.40417 6.8791667,6.8791667 0 0 0 16.404166,9.525 6.8791667,6.8791667 0 0 0 9.525,2.64583 Z m 0,3.70417 A 3.175,3.175 0 0 1 12.699996,9.525 3.175,3.175 0 0 1 9.525,12.7 3.175,3.175 0 0 1 6.35,9.525 3.175,3.175 0 0 1 9.525,6.35 Z"
  },
  czek_input = input.value.normalize("NFD")
  .replace(/[\u0300-\u036F]/g, "")
  .replace(/ł/g, "l").replace(/Ł/g, "L")
  .replace(/đ/g, "d").replace(/Đ/g, "D")
  .replace(/ß/g, "ss").replace(/ẞ/g, "SS")
  .replace(/æ/g, "ae").replace(/Æ/g, "AE")
  .replace(/œ/g, "oe").replace(/Œ/g, "OE")
  .replace(/ø/g, "o").replace(/Ø/g, "O")
  .replace(/ð/g, "d").replace(/Ð/g, "D")
  .replace(/þ/g, "th").replace(/Þ/g, "TH")
  .replace(/ñ/g, "n").replace(/Ñ/g, "N");
  if (czek_tekst.checked) {
    czek_wynik_tekst.style.display = "flex";
    czek_wynik_obraz.style.display = "none";
    for (let i = 0; i <= czek_input.length - 1; i++) {
      if (czek_input.toUpperCase()[i] in czek_data) {
        czek.value += czek_data[czek_input.toUpperCase()[i]] + " ";
      } else {
        czek.style.color = "#FF5555";
        czek.value += "� ";
      }
    }
    czek.value = czek.value.slice(0, -1);
  } else if (czek_obraz.checked) {
    czek_wynik_tekst.style.display = "none";
    czek_wynik_obraz.style.display = "flex";
    pos = 0; svgcode = '<svg height="36px" xmlns="http://www.w3.org/2000/svg"><title>Szyfr Czekoladka</title><g id="czek_svg" style="scale: 1.8897;">';
    czek_img.innerHTML = svgcode;
    for (let i = 0; i <= czek_input.length - 1; i++) {
      if (czek_input.toUpperCase()[i] in czek_img_data) {
        svgcode += '<path transform="translate(' + pos + ')" d="' + czek_img_data[czek_input.toUpperCase()[i]] + '" />';
        czek_img.innerHTML = svgcode + "</g></svg>";
        pos = (document.querySelector("#czek_svg").getBoundingClientRect().width + 18) / 1.8897;
      } else if (czek_input[i] == " ") {
        pos += 36 / 1.8897;
      }
    }
    document.querySelector(".czek_img_dl").href = "data:image/svg+xml;base64," + btoa(czek_img.innerHTML);
    czek_img.querySelector("svg").width.baseVal.valueAsString = "50vw";
  }
})
